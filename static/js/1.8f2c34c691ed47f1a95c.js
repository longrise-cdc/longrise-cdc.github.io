webpackJsonp([1],{KYsC:function(t,a,i){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var e=i("mtWM"),s=i.n(e),o=i("KgXo"),n=i("KeBu"),r=i("2uFj"),l=i("PJh5"),c=i.n(l),g={name:"project",head:{title:function(){return{inner:this.title}}},data:function(){return{title:"项目",list:[],total:0,category:[],loading:!1,ispaging:!1,activeCategory:"",lastpage:1,nomore:!1,form:{page:1,pagesize:8,sort:"desc",limit:{branch:"",category:""}}}},components:{Loading:o.a,Empty:n.a},created:function(){this.form.limit.branch=this.$route.params.branch,this.form.limit.category=this.$route.params.category,this.getCategory(),this.getProject()},methods:{gettime:function(t){return c()(1e3*parseInt(t)).calendar()},cover:function(t){if(t)return JSON.parse(t)},tag:function(t){if(t)return t.split(",")},getProject:function(){var t=this;for(var a in this.form.limit)this.form.limit[a]&&"all"!==this.form.limit[a]||delete this.form.limit[a];this.loading=!this.loading,s()({method:"get",url:r.F,params:this.form}).then(function(a){console.log(a.data.data),a.data.status&&(t.list=t.list.concat(a.data.data.data),t.total=a.data.data.total,t.lastpage=a.data.data.last_page,a.data.data.to===a.data.data.total&&(t.nomore=!0)),t.loading=!t.loading,t.ispaging=!1})},paging:function(){this.ispaging=!0,this.form.page+=1,this.form.page<=this.lastpage?this.getProject():this.nomore=!0},getCategory:function(){var t=this;s()({method:"get",url:r.a}).then(function(a){t.category=a.data.data,console.log(t.category)})},handleCommand:function(t){this.$router.push("/project/"+this.form.limit.branch+"/"+t)},handleCategory:function(t,a){this.form.page=1,this.list=[],this.nomore=!1,this.form.limit.branch=t.params.branch,this.form.limit.category=t.params.category,this.getProject()},handleSort:function(){this.page=1,this.list=[],"asc"===this.form.sort?this.form.sort="desc":this.form.sort="asc",this.getProject()}},watch:{$route:"handleCategory"}},m={render:function(){var t=this,a=t.$createElement,i=t._self._c||a;return i("div",{staticClass:"project"},[i("ul",{staticClass:"tab"},[i("li",[i("router-link",{attrs:{to:"/project/all"}},[t._v("全部")])],1),t._v(" "),t._l(t.category,function(a,e){return t.category.length?i("li",{key:e},[i("router-link",{attrs:{to:"/project/"+a.value}},[t._v(t._s(a.name))]),t._v(" "),a.children.length?i("el-dropdown",{attrs:{trigger:"click"},on:{command:t.handleCommand}},[i("span",{staticClass:"el-dropdown-link"},[i("i",{staticClass:"iconfont icon-listgrid"})]),t._v(" "),i("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},t._l(a.children,function(a,e){return i("el-dropdown-item",{key:e,class:[t.form.limit.category===a.value?"active":""],attrs:{command:a.value}},[t._v(t._s(a.name))])}))],1):t._e()],1):t._e()}),t._v(" "),i("li",{staticClass:"do"},[i("span",{staticClass:"v-m"},[t._v("时间排序：")]),t._v(" "),"asc"===t.form.sort?i("span",{staticClass:"iconfont icon-paixu-jiangxu v-m",on:{click:t.handleSort}}):t._e(),t._v(" "),"desc"===t.form.sort?i("span",{staticClass:"iconfont icon-paixu-shengxu v-m",on:{click:t.handleSort}}):t._e()])],2),t._v(" "),t.loading?i("loading",{staticStyle:{height:"700px"},attrs:{name:"tail-spin",size:28}},[i("span",{attrs:{slot:"text"},slot:"text"},[t._v("正在努力加载，请稍后！")])]):t._e(),t._v(" "),t.list.length||t.loading?t._e():i("empty",{staticStyle:{height:"700px"}},[i("img",{attrs:{slot:"icon",src:"static/tip2.png",alt:""},slot:"icon"}),t._v(" "),i("span",{attrs:{slot:"text"},slot:"text"},[t._v("这里还空空如也！")])]),t._v(" "),t.loading?t._e():i("div",[i("ul",{staticClass:"project-list"},t._l(t.list,function(a,e){return i("li",{key:e},[i("div",{staticClass:"project-item"},[i("div",{staticClass:"cover"},[t.cover(a.cover)?i("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.cover(a.cover).url,expression:"cover(item.cover).url"}],attrs:{alt:""}}):t._e(),t._v(" "),t.cover(a.cover)?t._e():i("div",{staticClass:"faild"},[i("p",{staticClass:"iconfont icon-gaojingtupian"}),t._v(" "),i("span",[t._v("加载失败")])])]),t._v(" "),i("h2",{staticClass:"title"},[i("router-link",{attrs:{to:"/project/"+a.branch.value+"/"+a.category.value+"/"+a.uId}},[t._v(t._s(a.title))])],1),t._v(" "),i("p",{staticClass:"tag"},t._l(t.tag(a.tag),function(a,e){return i("el-tag",{key:e,staticStyle:{"margin-right":"4px"},attrs:{size:"mini"}},[t._v(t._s(a))])})),t._v(" "),i("el-row",[i("el-col",{attrs:{span:10}},[i("p",{staticClass:"time"},[i("span",{staticClass:"iconfont icon-hot"}),t._v(" "),i("span",[t._v(t._s(a.download))])])]),t._v(" "),i("el-col",{staticStyle:{"text-align":"right"},attrs:{span:14}},[i("p",{staticClass:"time"},[i("span",{staticClass:"iconfont icon-time"}),t._v(" "),i("span",[t._v(t._s(t.gettime(a.created_at)))])])])],1)],1)])})),t._v(" "),!t.nomore&&t.list.length?i("el-button",{staticStyle:{width:"100%","margin-top":"20px"},attrs:{loading:t.ispaging,type:"text"},on:{click:t.paging}},[i("span",{staticClass:"iconfont icon-gengduo v-m"}),i("span",{staticClass:"v-m",staticStyle:{"margin-left":"5px"}},[t._v("点击加载更多")])]):t._e(),t._v(" "),t.nomore?i("el-button",{staticStyle:{width:"100%","margin-top":"20px"},attrs:{type:"text"}},[i("span",{staticClass:"iconfont icon-gengduo v-m"}),i("span",{staticClass:"v-m",staticStyle:{"margin-left":"5px"}},[t._v("没有更多！")])]):t._e()],1)],1)},staticRenderFns:[]};var d=i("VU/8")(g,m,!1,function(t){i("k2g1")},"data-v-458239ea",null);a.default=d.exports},k2g1:function(t,a){}});
//# sourceMappingURL=1.8f2c34c691ed47f1a95c.js.map