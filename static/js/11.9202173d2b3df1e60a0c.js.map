{"version":3,"sources":["webpack:///src/views/admin/setting/department.vue","webpack:///./src/views/admin/setting/department.vue?7178","webpack:///./src/views/admin/setting/department.vue"],"names":["id","department","uId","getList","empty","AppLoading","loading","_this","this","config","then","res","data","_this2","add","msg","_this3","del","newChild","parent","_this4","h","name","$createElement","val","setting_department","render","_vm","_h","_c","_self","staticClass","staticStyle","padding-bottom","height","margin-top","padding","attrs","placeholder","model","value","callback","$$v","filterText","expression","_v","overflow","list","ref","props","defaultProps","node-key","default-expand-all","expand-on-click-node","filter-node-method","filterNode","render-content","renderContent","_e","length","slot","src","alt","type","on","click","$event","modalAdd","title","Object","keys","current","visible","modal","width","update:visible","$set","close","clearCurrent","margin-bottom","color","margin","_s","clearable","addSubmit","delSubmit","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/11.9202173d2b3df1e60a0c.js","sourcesContent":["<template>\r\n  <div class=\"page-view\" style=\"padding-bottom:10px;\">\r\n    <div\r\n      style=\"height:55px;margin-top:-55px;padding:8px 10px;\"\r\n    >\r\n      <el-input\r\n        placeholder=\"输入关键字进行过滤\"\r\n        v-model=\"filterText\">\r\n      </el-input>\r\n    </div>\r\n    <div class=\"admin-main\" style=\"overflow:auto;\" v-if=\"list\">\r\n      <el-tree\r\n        v-if=\"list.length\"\r\n        style=\"padding:0 20px;\"\r\n        :data=\"list\"\r\n        :props=\"defaultProps\"\r\n        node-key=\"id\"\r\n        :default-expand-all=\"true\"\r\n        :expand-on-click-node=\"false\"\r\n        :filter-node-method=\"filterNode\"\r\n        ref=\"tree\"\r\n        :render-content=\"renderContent\">\r\n      </el-tree>\r\n      <empty v-if=\"!list.length && !loading\">\r\n        <img slot=\"icon\" src=\"static/tip1.png\" alt=\"\">\r\n        <p slot=\"text\">还没有添加任何部门哦！\r\n          <el-button @click=\"modalAdd(null, null)\" type=\"text\">前去添加</el-button>\r\n        </p>\r\n      </empty>\r\n      <app-loading v-if=\"loading\" style=\"height:100%;\" name=\"tail-spin\">\r\n        <span slot=\"text\">正在努力加载中，请稍后！</span>\r\n      </app-loading>\r\n    </div>\r\n    <el-dialog\r\n      :title=\"Object.keys(current).length ? '请填写子部门' : '请填写公司名称'\"\r\n      :visible.sync=\"modal.add\"\r\n      @close=\"clearCurrent\"\r\n      width=\"30%\">\r\n      <p  v-if=\"Object.keys(current).length\" style=\"margin-bottom:20px;\">您正在添加<span style=\"color:#D94447;margin:0 5px;\">{{current.name}}</span>的二级部门</p>\r\n      <el-input\r\n        placeholder=\"请填写部门名称\"\r\n        v-model=\"add.name\"\r\n        clearable>\r\n      </el-input>\r\n      <span slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button @click=\"modal.add = false\">取 消</el-button>\r\n        <el-button type=\"primary\" @click=\"addSubmit\">确 定</el-button>\r\n      </span>\r\n    </el-dialog>\r\n    <el-dialog\r\n      title=\"确认删除\"\r\n      :visible.sync=\"modal.del\"\r\n      width=\"30%\">\r\n      <p style=\"margin-bottom:20px;\">您正在删除<span style=\"color:#D94447;margin:0 5px;\">{{current.name}}</span></p>\r\n      <span slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button @click=\"modal.del = false\">取 消</el-button>\r\n        <el-button type=\"primary\" @click=\"delSubmit\">确 定</el-button>\r\n      </span>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n<script>\r\nimport axios from 'axios'\r\nimport {department, addDepartment, delDepartment} from '@/config'\r\nimport empty from '@/components/empty'\r\nimport AppLoading from '@/components/loading'\r\nlet id = 1000\r\nexport default {\r\n  data () {\r\n    return {\r\n      loading: false,\r\n      filterText: '',\r\n      list: [],\r\n      current: {},\r\n      modal: {\r\n        add: false,\r\n        del: false\r\n      },\r\n      add: {\r\n        name: '',\r\n        parent: '',\r\n        uId: JSON.parse(this.$localStorage.get('userInfo')).uId\r\n      },\r\n      del: {\r\n        uId: JSON.parse(this.$localStorage.get('userInfo')).uId,\r\n        id: ''\r\n      },\r\n      defaultProps: {\r\n        children: 'children',\r\n        label: 'name'\r\n      }\r\n    }\r\n  },\r\n  created () {\r\n    this.getList()\r\n  },\r\n  components: {\r\n    empty,\r\n    AppLoading\r\n  },\r\n  methods: {\r\n    clearCurrent () {\r\n      console.log('清空')\r\n      this.current = {}\r\n    },\r\n    getList () {\r\n      this.list = []\r\n      this.loading = !this.loading\r\n      axios({\r\n        method: 'get',\r\n        url: department\r\n      }).then(res => {\r\n        this.loading = !this.loading\r\n        if (res.data.data) {\r\n          this.list.push(res.data.data)\r\n        }\r\n      })\r\n    },\r\n    addSubmit () {\r\n      axios({\r\n        method: 'get',\r\n        url: addDepartment,\r\n        params: this.add\r\n      }).then(res => {\r\n        this.$message({\r\n          message: res.data.msg,\r\n          type: res.data.status ? 'success' : 'error'\r\n        })\r\n        this.modal.add = false\r\n        this.getList()\r\n      })\r\n    },\r\n    modalAdd (node, data) {\r\n      if (data) {\r\n        this.current = data\r\n        this.add.parent = data.uId\r\n      }\r\n      this.modal.add = true\r\n    },\r\n    delSubmit () {\r\n      axios({\r\n        method: 'get',\r\n        url: delDepartment,\r\n        params: this.del\r\n      }).then(res => {\r\n        this.$message({\r\n          message: res.data.msg,\r\n          type: res.data.status ? 'success' : 'error'\r\n        })\r\n        this.modal.del = false\r\n        this.getList()\r\n      })\r\n      this.modal.del = false\r\n    },\r\n    modalDel (node, data) {\r\n      this.current = data\r\n      this.del.id = data.uId\r\n      this.modal.del = true\r\n    },\r\n    append (data) {\r\n      const newChild = { id: id++, label: 'testtest', children: [] }\r\n      if (!data.children) {\r\n        this.$set(data, 'children', [])\r\n      }\r\n      data.children.push(newChild)\r\n    },\r\n\r\n    remove (node, data) {\r\n      const parent = node.parent\r\n      const children = parent.data.children || parent.data\r\n      const index = children.findIndex(d => d.id === data.id)\r\n      children.splice(index, 1)\r\n    },\r\n\r\n    renderContent (h, { node, data, store }) {\r\n      return (\r\n        <span style=\"flex: 1; display: flex; align-items: center; justify-content: space-between; font-size: 14px; padding-right: 8px;\">\r\n          <span>\r\n            <span>\r\n              {this.renderParent(data)}\r\n              {data.name}\r\n            </span>\r\n          </span>\r\n          <span class=\"do\">\r\n            <el-button title=\"添加子部门\" style=\"font-size: 12px;\" plain size=\"mini\" on-click={ () => this.modalAdd(node, data)} icon=\"el-icon-plus\"></el-button>\r\n            <el-button title=\"删除该部门\" style=\"font-size: 12px;\" plain size=\"mini\" on-click={ () => this.modalDel(node, data) } icon=\"el-icon-minus\"></el-button>\r\n          </span>\r\n        </span>)\r\n    },\r\n    renderParent (data) {\r\n      if (data.children.length) {\r\n        return <span class=\"iconfont icon-folder\" style=\"margin-right:5px;\"></span>\r\n      } else {\r\n        if (data.name.indexOf('总监') > -1) {\r\n          return <span class=\"iconfont icon-yonghu\" style=\"margin-right:5px;\"></span>\r\n        } else if (data.name.indexOf('经理') > -1) {\r\n          return <span class=\"iconfont icon-leader\" style=\"margin-right:5px;\"></span>\r\n        } else if (data.name.indexOf('组长') > -1) {\r\n          return <span class=\"iconfont icon-icon-\" style=\"margin-right:5px;\"></span>\r\n        } else {\r\n          return <span class=\"iconfont icon-list\" style=\"margin-right:5px;\"></span>\r\n        }\r\n      }\r\n    },\r\n    filterNode (value, data) {\r\n      if (!value) return true\r\n      return data.name.indexOf(value) !== -1\r\n    }\r\n  },\r\n  watch: {\r\n    filterText (val) {\r\n      this.$refs.tree.filter(val)\r\n    }\r\n  }\r\n}\r\n</script>\r\n<style>\r\n.el-tree-node__content{\r\n  height:38px !important;\r\n  border-bottom:1px solid #f9f9f9;\r\n}\r\n.do{\r\n  display:none;\r\n}\r\n.el-tree-node__content:hover .do{display:block;}\r\n.el-button--mini{\r\n  padding:5px;\r\n}\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/views/admin/setting/department.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"page-view\",staticStyle:{\"padding-bottom\":\"10px\"}},[_c('div',{staticStyle:{\"height\":\"55px\",\"margin-top\":\"-55px\",\"padding\":\"8px 10px\"}},[_c('el-input',{attrs:{\"placeholder\":\"输入关键字进行过滤\"},model:{value:(_vm.filterText),callback:function ($$v) {_vm.filterText=$$v},expression:\"filterText\"}})],1),_vm._v(\" \"),(_vm.list)?_c('div',{staticClass:\"admin-main\",staticStyle:{\"overflow\":\"auto\"}},[(_vm.list.length)?_c('el-tree',{ref:\"tree\",staticStyle:{\"padding\":\"0 20px\"},attrs:{\"data\":_vm.list,\"props\":_vm.defaultProps,\"node-key\":\"id\",\"default-expand-all\":true,\"expand-on-click-node\":false,\"filter-node-method\":_vm.filterNode,\"render-content\":_vm.renderContent}}):_vm._e(),_vm._v(\" \"),(!_vm.list.length && !_vm.loading)?_c('empty',[_c('img',{attrs:{\"slot\":\"icon\",\"src\":\"static/tip1.png\",\"alt\":\"\"},slot:\"icon\"}),_vm._v(\" \"),_c('p',{attrs:{\"slot\":\"text\"},slot:\"text\"},[_vm._v(\"还没有添加任何部门哦！\\n        \"),_c('el-button',{attrs:{\"type\":\"text\"},on:{\"click\":function($event){_vm.modalAdd(null, null)}}},[_vm._v(\"前去添加\")])],1)]):_vm._e(),_vm._v(\" \"),(_vm.loading)?_c('app-loading',{staticStyle:{\"height\":\"100%\"},attrs:{\"name\":\"tail-spin\"}},[_c('span',{attrs:{\"slot\":\"text\"},slot:\"text\"},[_vm._v(\"正在努力加载中，请稍后！\")])]):_vm._e()],1):_vm._e(),_vm._v(\" \"),_c('el-dialog',{attrs:{\"title\":Object.keys(_vm.current).length ? '请填写子部门' : '请填写公司名称',\"visible\":_vm.modal.add,\"width\":\"30%\"},on:{\"update:visible\":function($event){_vm.$set(_vm.modal, \"add\", $event)},\"close\":_vm.clearCurrent}},[(Object.keys(_vm.current).length)?_c('p',{staticStyle:{\"margin-bottom\":\"20px\"}},[_vm._v(\"您正在添加\"),_c('span',{staticStyle:{\"color\":\"#D94447\",\"margin\":\"0 5px\"}},[_vm._v(_vm._s(_vm.current.name))]),_vm._v(\"的二级部门\")]):_vm._e(),_vm._v(\" \"),_c('el-input',{attrs:{\"placeholder\":\"请填写部门名称\",\"clearable\":\"\"},model:{value:(_vm.add.name),callback:function ($$v) {_vm.$set(_vm.add, \"name\", $$v)},expression:\"add.name\"}}),_vm._v(\" \"),_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.modal.add = false}}},[_vm._v(\"取 消\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.addSubmit}},[_vm._v(\"确 定\")])],1)],1),_vm._v(\" \"),_c('el-dialog',{attrs:{\"title\":\"确认删除\",\"visible\":_vm.modal.del,\"width\":\"30%\"},on:{\"update:visible\":function($event){_vm.$set(_vm.modal, \"del\", $event)}}},[_c('p',{staticStyle:{\"margin-bottom\":\"20px\"}},[_vm._v(\"您正在删除\"),_c('span',{staticStyle:{\"color\":\"#D94447\",\"margin\":\"0 5px\"}},[_vm._v(_vm._s(_vm.current.name))])]),_vm._v(\" \"),_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.modal.del = false}}},[_vm._v(\"取 消\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.delSubmit}},[_vm._v(\"确 定\")])],1)])],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-56a0311b\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/admin/setting/department.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-56a0311b\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./department.vue\")\n}\nvar normalizeComponent = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./department.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./department.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-56a0311b\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./department.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/admin/setting/department.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}