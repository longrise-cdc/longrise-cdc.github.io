{"version":3,"sources":["webpack:///src/views/project/detail.vue","webpack:///./src/views/project/detail.vue?ab6d","webpack:///./src/views/project/detail.vue"],"names":["detail","title","config","$route","uId","Empty","empty","getInfo","calendar","fromId","item","items","_this","this","reply","then","res","getComments","_this2","_this3","data","info","attach","_this4","pagesize","total","project_detail","render","_vm","_h","$createElement","_c","_self","staticClass","staticStyle","height","attrs","src","downUrl","frameborder","_v","padding-right","span","separator","to","branch","value","_s","name","category","margin-bottom","domProps","innerHTML","html","comments","_l","index","key","from","file","cover","alt","_e","gettime","created_at","type","on","click","$event","reback","children","length","content","i","margin-left","rebacks","rows","placeholder","model","callback","$$v","$set","expression","userInfo","slot","route","path","parentId","rebacker","textContent","submit","label","tag","split","margin-right","size","author","updated_at","view","download","display","href","down","width","round","moment","parseInt","startOf","fromNow","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/17.58d72eb4f754a09f5b0c.js","sourcesContent":["<template>\r\n  <div class=\"detail\">\r\n    <iframe :src=\"downUrl\" style=\"height:0;\" frameborder=\"0\"></iframe>\r\n    <el-row v-if=\"info\">\r\n      <el-col :span=\"18\" style=\"padding-right:40px;\" class=\"article\">\r\n        <div class=\"router\">\r\n          <el-breadcrumb separator=\"/\">\r\n            <el-breadcrumb-item :to=\"'/'\">首页</el-breadcrumb-item>\r\n            <el-breadcrumb-item to=\"/project\">项目</el-breadcrumb-item>\r\n            <el-breadcrumb-item :to=\"'/project/' + info.branch.value\">{{info.branch.name}}</el-breadcrumb-item>\r\n            <el-breadcrumb-item :to=\"'/project/' + info.branch.value + '/' + info.category.value\">{{info.category.name}}</el-breadcrumb-item>\r\n            <el-breadcrumb-item>{{title}}</el-breadcrumb-item>\r\n          </el-breadcrumb>\r\n        </div>\r\n        <div v-html=\"info.html\" style=\"margin-bottom:50px;\"></div>\r\n        <h3 class=\"title\">评论 <span class=\"count\"><i>{{total}}</i>条评论</span></h3>\r\n        <ul class=\"comments\" v-if=\"comments.length\">\r\n          <li v-for=\"(item, index) in comments\" :key=\"index\">\r\n            <div class=\"comment-item\">\r\n              <h2>\r\n                <router-link :to=\"'/user/' + item.from.uId\" v-if=\"item.from\">\r\n                  <img :src=\"file + item.from.cover\" alt=\"\">\r\n                  <span>{{item.from.name}}</span>\r\n                </router-link>\r\n                <span>于</span>\r\n                <span>{{gettime(item.created_at)}}</span>\r\n                <span>评论：</span>\r\n                <span v-if=\"item.to\">\r\n                  <img :src=\"file + item.to.cover\" alt=\"\">\r\n                  <span>{{item.to.name}}</span>\r\n                </span>\r\n                <i class=\"time\">\r\n                  <el-button @click=\"reback(item)\" type=\"text\">回复({{item.children.length}})</el-button>\r\n                </i>\r\n              </h2>\r\n              <p>{{item.content}}</p>\r\n            </div>\r\n            <ul class=\"sub\" v-if=\"item.children\">\r\n              <li v-for=\"(i, index) in item.children\" :key=\"index\">\r\n                <div class=\"comment-item\">\r\n                  <h2>\r\n                    <router-link :to=\"'/user/' + i.from.uId\" class=\"v-m\">{{i.from.name}}</router-link>\r\n                    <span>回复</span>\r\n                    <router-link :to=\"'/user/' + i.to.uId\" class=\"v-m\">{{i.to.name}}</router-link>\r\n                    <span style=\"margin-left:1em;\">{{gettime(i.created_at)}}</span>\r\n                    <i class=\"time\"><el-button @click=\"rebacks(item, i)\" type=\"text\">回复</el-button></i>\r\n                  </h2>\r\n                  <p>{{i.content}}</p>\r\n                </div>\r\n              </li>\r\n            </ul>\r\n            <el-input\r\n              type=\"textarea\"\r\n              :rows=\"2\"\r\n              :placeholder=\"'回复' + item.from.name\"\r\n              v-if=\"item.reply\"\r\n              v-model=\"reply.content\">\r\n            </el-input>\r\n          </li>\r\n        </ul>\r\n        <empty v-if=\"!comments.length && userInfo\">\r\n          <img slot=\"icon\" src=\"static/tip1.png\" alt=\"\">\r\n          <span slot=\"text\">还没有任何评论，快来抢沙发！</span>\r\n        </empty>\r\n        <empty v-if=\"!userInfo\">\r\n          <img slot=\"icon\" src=\"static/tip1.png\" alt=\"\">\r\n          <span slot=\"text\">还没有任何评论，快来抢沙发！<router-link :to=\"'/login?prev=' + route.path\">前往登录！</router-link></span>\r\n        </empty>\r\n        <el-input\r\n          v-if=\"userInfo\"\r\n          style=\"margin-bottom:10px;\"\r\n          type=\"textarea\"\r\n          :rows=\"4\"\r\n          :placeholder=\"reply.parentId ? '回复：' + rebacker.from.name : '评论内容'\"\r\n          v-model=\"reply.content\">\r\n        </el-input>\r\n        <el-button v-if=\"userInfo\" @click=\"submit\" type=\"primary\" v-text=\"reply.parentId ? '回复' : '评论'\"></el-button>\r\n      </el-col>\r\n      <el-col :span=\"6\" class=\"article-info\">\r\n        <h2 class=\"title\">详情</h2>\r\n        <el-form style=\"margin-bottom:20px;\">\r\n          <el-form-item label=\"标题：\">\r\n            {{info.title}}\r\n          </el-form-item>\r\n          <el-form-item label=\"分类：\">\r\n            {{info.branch.name}}>{{info.category.name}}\r\n          </el-form-item>\r\n          <el-form-item label=\"标签：\" v-if=\"info.tag\">\r\n            <el-tag style=\"margin-right:5px;\" size=\"mini\" v-for=\"(item, index) in info.tag.split(',')\" :key=\"index\">{{item}}</el-tag>\r\n          </el-form-item>\r\n          <el-form-item label=\"作者：\">\r\n            {{info.author.name}}\r\n          </el-form-item>\r\n          <el-form-item label=\"发布时间：\">\r\n            {{gettime(info.created_at)}}\r\n          </el-form-item>\r\n          <el-form-item label=\"修改时间：\">\r\n            {{gettime(info.updated_at)}}\r\n          </el-form-item>\r\n          <el-form-item label=\"浏览量：\">\r\n            {{info.view}}次\r\n          </el-form-item>\r\n          <el-form-item label=\"下载量：\">\r\n            {{info.download}}次\r\n          </el-form-item>\r\n          <el-form-item label=\"附件：\" v-if=\"info.attach\">\r\n            <a style=\"display:block;\" href=\"javascript:;\" v-for=\"(item, index) in info.attach\" :key=\"index\" @click=\"down(item)\"><span class=\"iconfont v-m icon-fujian\"></span><span class=\"v-m\">{{item.name}}</span></a>\r\n          </el-form-item>\r\n        </el-form>\r\n        <el-button type=\"danger\" round style=\"width:100%;margin-bottom:50px;\">收藏</el-button>\r\n        <h2 class=\"title\">最受欢迎</h2>\r\n        <ul class=\"list\">\r\n          <li v-for=\"(item, index) in info.related\" :key=\"index\">\r\n            <router-link :to=\"'/project/' + item.branch + '/' + item.category + '/' + item.uId\"><i class=\"tag\">{{index + 1}}</i>{{item.title}}</router-link>\r\n            <span>{{moment(parseInt(item.updated_at) * 1000).startOf('hour').fromNow()}}</span>\r\n          </li>\r\n        </ul>\r\n      </el-col>\r\n    </el-row>\r\n  </div>\r\n</template>\r\n<script>\r\nimport {projectInfo, download, comments, file, commentAdd} from '@/config'\r\nimport axios from 'axios'\r\nimport Empty from '@/components/empty'\r\nimport moment from 'moment'\r\nimport { setTimeout } from 'timers'\r\nexport default {\r\n  name: 'projectInfo',\r\n  head: {\r\n    title () {\r\n      return {\r\n        inner: this.title\r\n      }\r\n    }\r\n  },\r\n  data () {\r\n    return {\r\n      title: '文章详情',\r\n      info: null,\r\n      comments: [],\r\n      file: file,\r\n      total: 0,\r\n      downUrl: '',\r\n      pagesize: 100,\r\n      userInfo: JSON.parse(this.$localStorage.get('userInfo')),\r\n      defaultProps: {\r\n        children: 'children',\r\n        label: 'content'\r\n      },\r\n      route: this.$route,\r\n      reply: {\r\n        content: '',\r\n        topicId: this.$route.params.uId,\r\n        topicType: 0,\r\n        parentId: '',\r\n        fromId: '',\r\n        toId: ''\r\n      },\r\n      rebacker: {}\r\n    }\r\n  },\r\n  components: {\r\n    Empty\r\n  },\r\n  created () {\r\n    if (this.userInfo) {\r\n      this.reply.fromId = this.userInfo.uId\r\n    }\r\n    this.getInfo()\r\n  },\r\n  methods: {\r\n    gettime (num) {\r\n      return moment(parseInt(num) * 1000).calendar()\r\n    },\r\n    reback (item) {\r\n      this.reply.parentId = item.uId\r\n      this.reply.toId = item.fromId\r\n      this.rebacker = item\r\n      this.reply.fromId = JSON.parse(this.$localStorage.get('userInfo')).uId\r\n    },\r\n    rebacks (item, items) {\r\n      this.reply.parentId = item.uId\r\n      this.reply.toId = items.fromId\r\n      this.rebacker = items\r\n      this.reply.fromId = JSON.parse(this.$localStorage.get('userInfo')).uId\r\n    },\r\n    submit () {\r\n      if (!this.reply.content || this.reply.content.length < 6) {\r\n        this.$message.error('评论内容必须长于6位字符！')\r\n        return false\r\n      }\r\n      console.log(this.reply)\r\n      axios({\r\n        method: 'get',\r\n        url: commentAdd,\r\n        params: this.reply\r\n      }).then(res => {\r\n        console.log(res)\r\n        this.reply.content = ''\r\n        this.getComments()\r\n      })\r\n    },\r\n    down (item) {\r\n      console.log(item)\r\n      this.downUrl = download + '?url=' + item.name + '&name=' + this.info.title + '&uId=' + this.info.uId\r\n      setTimeout(() => {\r\n        this.getInfo()\r\n      }, 1000)\r\n    },\r\n    getInfo () {\r\n      this.reply.topicId = this.$route.params.uId\r\n      axios({\r\n        method: 'get',\r\n        url: projectInfo,\r\n        params: {\r\n          uId: this.$route.params.uId\r\n        }\r\n      }).then(res => {\r\n        this.info = res.data.data\r\n        console.log(this.info)\r\n        var attach = this.info.attach.split('-')\r\n        attach.forEach((item, index) => {\r\n          attach[index] = JSON.parse(item)\r\n        })\r\n        this.info.attach = attach\r\n        this.title = res.data.data.title\r\n        this.$emit('updateHead')\r\n        this.getComments()\r\n        // console.log(this.info)\r\n      })\r\n    },\r\n    getComments () {\r\n      this.total = 0\r\n      this.comments = []\r\n      axios({\r\n        method: 'get',\r\n        url: comments,\r\n        params: {\r\n          topicId: this.$route.params.uId,\r\n          pagesize: this.pagesize\r\n        }\r\n      }).then(res => {\r\n        this.total = res.data.total\r\n        this.comments = res.data.data.data\r\n      })\r\n    }\r\n  },\r\n  watch: {\r\n    '$route': 'getInfo'\r\n  }\r\n}\r\n</script>\r\n<style lang=\"scss\">\r\n.article{\r\n  img{\r\n    max-width:100%;\r\n  }\r\n  p{\r\n    font-size:14px;\r\n    line-height:1.8;\r\n    text-indent:2em;\r\n  }\r\n  .title{\r\n    font-weight:normal;\r\n    font-size:18px;\r\n    color:#333;\r\n    border-bottom:1px solid #eee;\r\n    padding:0 10px 10px 10px;\r\n    margin-bottom:20px;\r\n    position: relative;\r\n    .count{\r\n      position: absolute;\r\n      right:0;\r\n      top:50%;\r\n      transform:translate(0, -50%);\r\n      font-size:14px;\r\n      color:#999;\r\n      i{\r\n        font-style:normal;\r\n        font-size:24px;\r\n        margin-right:5px;\r\n        color:#F56C6C;\r\n      }\r\n    }\r\n  }\r\n  .router{\r\n    padding:10px 0;\r\n    border-bottom:1px solid #eee;\r\n    margin-bottom:20px;\r\n  }\r\n}\r\n.article-info{\r\n  .title{\r\n    font-weight:normal;\r\n    font-size:14px;\r\n    color:#666;\r\n    margin-bottom:10px;\r\n    padding: 8px 10px;\r\n    background:#f5f5f5;\r\n  }\r\n  .el-form-item{\r\n    margin-bottom:0;\r\n    font-size:14px;\r\n    padding:0 10px;\r\n  }\r\n}\r\n.list{\r\n  li{\r\n    display:table;\r\n    width:100%;\r\n    font-size:14px;\r\n    border-bottom:1px dashed #eee;\r\n    a,span{\r\n      display:table-cell;\r\n      padding:10px;\r\n      color:#666;\r\n      .tag{\r\n        display:inline-block;\r\n        margin-right:5px;\r\n        font-style:normal;\r\n        width:16px;\r\n        height:16px;\r\n        background:#ccc;\r\n        color:#fff;\r\n        text-align:center;\r\n        line-height:16px;\r\n        vertical-align: middle;\r\n        border-radius:50%;\r\n        font-size:12px;\r\n      }\r\n    }\r\n    &:nth-child(1) .tag{\r\n      background:#F56C6C;\r\n    }\r\n    &:nth-child(2) .tag{\r\n      background:#E6A23C;\r\n    }\r\n    &:nth-child(3) .tag{\r\n      background:#909399;\r\n    }\r\n    span{\r\n      text-align:right;\r\n      font-size:12px;\r\n      color:#999;\r\n    }\r\n  }\r\n}\r\n.comments{\r\n  font-size:14px;\r\n  .sub{\r\n    padding:10px 0 10px 30px;\r\n  }\r\n  .comment-item{\r\n    h2{\r\n      font-size:12px;\r\n      font-weight:normal;\r\n      color:#999;\r\n      position: relative;\r\n      background:#fdfdfd;\r\n      padding:5px 10px;\r\n      img{\r\n        width:24px;\r\n        height:24px;\r\n        border-radius:50%;\r\n        vertical-align: middle;\r\n        margin-right:5px;\r\n        border:none;\r\n      }\r\n      span{\r\n        display:inline-block;\r\n        vertical-align: middle;\r\n      }\r\n      .time{\r\n        position: absolute;\r\n        right:10px;\r\n        top:50%;\r\n        transform:translate(0,-50%);\r\n        font-style:normal;\r\n      }\r\n    }\r\n  }\r\n  p{\r\n    font-size:14px;\r\n    color:#666;\r\n    line-height:1.8;\r\n    padding:10px;\r\n    text-indent:2em;\r\n  }\r\n}\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/views/project/detail.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"detail\"},[_c('iframe',{staticStyle:{\"height\":\"0\"},attrs:{\"src\":_vm.downUrl,\"frameborder\":\"0\"}}),_vm._v(\" \"),(_vm.info)?_c('el-row',[_c('el-col',{staticClass:\"article\",staticStyle:{\"padding-right\":\"40px\"},attrs:{\"span\":18}},[_c('div',{staticClass:\"router\"},[_c('el-breadcrumb',{attrs:{\"separator\":\"/\"}},[_c('el-breadcrumb-item',{attrs:{\"to\":'/'}},[_vm._v(\"首页\")]),_vm._v(\" \"),_c('el-breadcrumb-item',{attrs:{\"to\":\"/project\"}},[_vm._v(\"项目\")]),_vm._v(\" \"),_c('el-breadcrumb-item',{attrs:{\"to\":'/project/' + _vm.info.branch.value}},[_vm._v(_vm._s(_vm.info.branch.name))]),_vm._v(\" \"),_c('el-breadcrumb-item',{attrs:{\"to\":'/project/' + _vm.info.branch.value + '/' + _vm.info.category.value}},[_vm._v(_vm._s(_vm.info.category.name))]),_vm._v(\" \"),_c('el-breadcrumb-item',[_vm._v(_vm._s(_vm.title))])],1)],1),_vm._v(\" \"),_c('div',{staticStyle:{\"margin-bottom\":\"50px\"},domProps:{\"innerHTML\":_vm._s(_vm.info.html)}}),_vm._v(\" \"),_c('h3',{staticClass:\"title\"},[_vm._v(\"评论 \"),_c('span',{staticClass:\"count\"},[_c('i',[_vm._v(_vm._s(_vm.total))]),_vm._v(\"条评论\")])]),_vm._v(\" \"),(_vm.comments.length)?_c('ul',{staticClass:\"comments\"},_vm._l((_vm.comments),function(item,index){return _c('li',{key:index},[_c('div',{staticClass:\"comment-item\"},[_c('h2',[(item.from)?_c('router-link',{attrs:{\"to\":'/user/' + item.from.uId}},[_c('img',{attrs:{\"src\":_vm.file + item.from.cover,\"alt\":\"\"}}),_vm._v(\" \"),_c('span',[_vm._v(_vm._s(item.from.name))])]):_vm._e(),_vm._v(\" \"),_c('span',[_vm._v(\"于\")]),_vm._v(\" \"),_c('span',[_vm._v(_vm._s(_vm.gettime(item.created_at)))]),_vm._v(\" \"),_c('span',[_vm._v(\"评论：\")]),_vm._v(\" \"),(item.to)?_c('span',[_c('img',{attrs:{\"src\":_vm.file + item.to.cover,\"alt\":\"\"}}),_vm._v(\" \"),_c('span',[_vm._v(_vm._s(item.to.name))])]):_vm._e(),_vm._v(\" \"),_c('i',{staticClass:\"time\"},[_c('el-button',{attrs:{\"type\":\"text\"},on:{\"click\":function($event){_vm.reback(item)}}},[_vm._v(\"回复(\"+_vm._s(item.children.length)+\")\")])],1)],1),_vm._v(\" \"),_c('p',[_vm._v(_vm._s(item.content))])]),_vm._v(\" \"),(item.children)?_c('ul',{staticClass:\"sub\"},_vm._l((item.children),function(i,index){return _c('li',{key:index},[_c('div',{staticClass:\"comment-item\"},[_c('h2',[_c('router-link',{staticClass:\"v-m\",attrs:{\"to\":'/user/' + i.from.uId}},[_vm._v(_vm._s(i.from.name))]),_vm._v(\" \"),_c('span',[_vm._v(\"回复\")]),_vm._v(\" \"),_c('router-link',{staticClass:\"v-m\",attrs:{\"to\":'/user/' + i.to.uId}},[_vm._v(_vm._s(i.to.name))]),_vm._v(\" \"),_c('span',{staticStyle:{\"margin-left\":\"1em\"}},[_vm._v(_vm._s(_vm.gettime(i.created_at)))]),_vm._v(\" \"),_c('i',{staticClass:\"time\"},[_c('el-button',{attrs:{\"type\":\"text\"},on:{\"click\":function($event){_vm.rebacks(item, i)}}},[_vm._v(\"回复\")])],1)],1),_vm._v(\" \"),_c('p',[_vm._v(_vm._s(i.content))])])])})):_vm._e(),_vm._v(\" \"),(item.reply)?_c('el-input',{attrs:{\"type\":\"textarea\",\"rows\":2,\"placeholder\":'回复' + item.from.name},model:{value:(_vm.reply.content),callback:function ($$v) {_vm.$set(_vm.reply, \"content\", $$v)},expression:\"reply.content\"}}):_vm._e()],1)})):_vm._e(),_vm._v(\" \"),(!_vm.comments.length && _vm.userInfo)?_c('empty',[_c('img',{attrs:{\"slot\":\"icon\",\"src\":\"static/tip1.png\",\"alt\":\"\"},slot:\"icon\"}),_vm._v(\" \"),_c('span',{attrs:{\"slot\":\"text\"},slot:\"text\"},[_vm._v(\"还没有任何评论，快来抢沙发！\")])]):_vm._e(),_vm._v(\" \"),(!_vm.userInfo)?_c('empty',[_c('img',{attrs:{\"slot\":\"icon\",\"src\":\"static/tip1.png\",\"alt\":\"\"},slot:\"icon\"}),_vm._v(\" \"),_c('span',{attrs:{\"slot\":\"text\"},slot:\"text\"},[_vm._v(\"还没有任何评论，快来抢沙发！\"),_c('router-link',{attrs:{\"to\":'/login?prev=' + _vm.route.path}},[_vm._v(\"前往登录！\")])],1)]):_vm._e(),_vm._v(\" \"),(_vm.userInfo)?_c('el-input',{staticStyle:{\"margin-bottom\":\"10px\"},attrs:{\"type\":\"textarea\",\"rows\":4,\"placeholder\":_vm.reply.parentId ? '回复：' + _vm.rebacker.from.name : '评论内容'},model:{value:(_vm.reply.content),callback:function ($$v) {_vm.$set(_vm.reply, \"content\", $$v)},expression:\"reply.content\"}}):_vm._e(),_vm._v(\" \"),(_vm.userInfo)?_c('el-button',{attrs:{\"type\":\"primary\"},domProps:{\"textContent\":_vm._s(_vm.reply.parentId ? '回复' : '评论')},on:{\"click\":_vm.submit}}):_vm._e()],1),_vm._v(\" \"),_c('el-col',{staticClass:\"article-info\",attrs:{\"span\":6}},[_c('h2',{staticClass:\"title\"},[_vm._v(\"详情\")]),_vm._v(\" \"),_c('el-form',{staticStyle:{\"margin-bottom\":\"20px\"}},[_c('el-form-item',{attrs:{\"label\":\"标题：\"}},[_vm._v(\"\\n          \"+_vm._s(_vm.info.title)+\"\\n        \")]),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"分类：\"}},[_vm._v(\"\\n          \"+_vm._s(_vm.info.branch.name)+\">\"+_vm._s(_vm.info.category.name)+\"\\n        \")]),_vm._v(\" \"),(_vm.info.tag)?_c('el-form-item',{attrs:{\"label\":\"标签：\"}},_vm._l((_vm.info.tag.split(',')),function(item,index){return _c('el-tag',{key:index,staticStyle:{\"margin-right\":\"5px\"},attrs:{\"size\":\"mini\"}},[_vm._v(_vm._s(item))])})):_vm._e(),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"作者：\"}},[_vm._v(\"\\n          \"+_vm._s(_vm.info.author.name)+\"\\n        \")]),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"发布时间：\"}},[_vm._v(\"\\n          \"+_vm._s(_vm.gettime(_vm.info.created_at))+\"\\n        \")]),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"修改时间：\"}},[_vm._v(\"\\n          \"+_vm._s(_vm.gettime(_vm.info.updated_at))+\"\\n        \")]),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"浏览量：\"}},[_vm._v(\"\\n          \"+_vm._s(_vm.info.view)+\"次\\n        \")]),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"下载量：\"}},[_vm._v(\"\\n          \"+_vm._s(_vm.info.download)+\"次\\n        \")]),_vm._v(\" \"),(_vm.info.attach)?_c('el-form-item',{attrs:{\"label\":\"附件：\"}},_vm._l((_vm.info.attach),function(item,index){return _c('a',{key:index,staticStyle:{\"display\":\"block\"},attrs:{\"href\":\"javascript:;\"},on:{\"click\":function($event){_vm.down(item)}}},[_c('span',{staticClass:\"iconfont v-m icon-fujian\"}),_c('span',{staticClass:\"v-m\"},[_vm._v(_vm._s(item.name))])])})):_vm._e()],1),_vm._v(\" \"),_c('el-button',{staticStyle:{\"width\":\"100%\",\"margin-bottom\":\"50px\"},attrs:{\"type\":\"danger\",\"round\":\"\"}},[_vm._v(\"收藏\")]),_vm._v(\" \"),_c('h2',{staticClass:\"title\"},[_vm._v(\"最受欢迎\")]),_vm._v(\" \"),_c('ul',{staticClass:\"list\"},_vm._l((_vm.info.related),function(item,index){return _c('li',{key:index},[_c('router-link',{attrs:{\"to\":'/project/' + item.branch + '/' + item.category + '/' + item.uId}},[_c('i',{staticClass:\"tag\"},[_vm._v(_vm._s(index + 1))]),_vm._v(_vm._s(item.title))]),_vm._v(\" \"),_c('span',[_vm._v(_vm._s(_vm.moment(parseInt(item.updated_at) * 1000).startOf('hour').fromNow()))])],1)}))],1)],1):_vm._e()],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-25eb307c\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/project/detail.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-25eb307c\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./detail.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./detail.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./detail.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-25eb307c\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./detail.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/project/detail.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}