{"version":3,"sources":["webpack:///src/views/personer/face.vue","webpack:///./src/views/personer/face.vue?755c","webpack:///./src/views/personer/face.vue"],"names":["face","title","laststep","refresh","_this","this","config","uId","dataUrl","then","res","file","userInfo","msg","personer_face","render","_vm","_h","$createElement","_c","_self","staticClass","_v","attrs","width","height","canvas-color","placeholder","placeholder-font-size","placeholder-color","accept","quality","zoom-speed","show-remove-button","remove-button-color","remove-button-size","model","value","callback","$$v","croppa","expression","src","alt","_e","size","type","on","click","$event","zoomIn","zoomOut","moveUpwards","moveDownwards","moveLeftwards","moveRightwards","rotate","flipY","flipX","crop","submit","back","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/18.971209ab1d3962fc4ca6.js","sourcesContent":["<template>\n  <div class=\"face-view\">\n    <h2 class=\"page-title\">修改头像</h2>\n    <div class=\"page-view\">\n      <ul class=\"row w\">\n        <li class=\"col v-t g-12\">\n          <croppa\n            v-model=\"croppa\"\n            :width=\"300\"\n            :height=\"300\"\n            :canvas-color=\"'default'\"\n            :placeholder=\"'选择一张图片'\"\n            :placeholder-font-size=\"16\"\n            :placeholder-color=\"'#999'\"\n            :accept=\"'image/*'\"\n            :quality=\"2\"\n            :zoom-speed=\"3\"\n            :show-remove-button=\"true\"\n            :remove-button-color=\"'red'\"\n            :remove-button-size=\"18\"\n          ></croppa>\n        </li>\n        <li class=\"col v-t g-6\" v-if=\"laststep\">\n          <h3 class=\"sub-title\">大头像</h3>\n          <div class=\"face normal\">\n            <img :src=\"dataUrl\" alt=\"\">\n          </div>\n        </li>\n        <li class=\"col v-t g-6\" v-if=\"laststep\">\n          <h3 class=\"sub-title\">小头像</h3>\n          <div class=\"face small\">\n            <img :src=\"dataUrl\" alt=\"\">\n          </div>\n        </li>\n      </ul>\n      <div class=\"crop\">\n        <Button size=\"small\" @click='croppa.zoomIn()' type=\"text\"><span class=\"iconfont icon-fangda\"></span></Button>\n        <Button size=\"small\" @click='croppa.zoomOut()' type=\"text\"><span class=\"iconfont icon-suoxiao\"></span></Button>\n        <Button size=\"small\" @click='croppa.moveUpwards(10)' type=\"text\"><span class=\"iconfont icon-xiangshang\"></span></Button>\n        <Button size=\"small\" @click='croppa.moveDownwards(10)' type=\"text\"><span class=\"iconfont icon-xiangxia\"></span></Button>\n        <Button size=\"small\" @click='croppa.moveLeftwards(10)' type=\"text\"><span class=\"iconfont icon-zhixiangzuo\"></span></Button>\n        <Button size=\"small\" @click='croppa.moveRightwards(10)' type=\"text\"><span class=\"iconfont icon-xiangyou\"></span></Button>\n        <Button size=\"small\" @click='croppa.rotate(2)' type=\"text\"><span class=\"iconfont icon-xuanzhuan1\"></span></Button>\n        <Button size=\"small\" @click='croppa.rotate()' type=\"text\"><span class=\"iconfont icon-xuanzhuan\"></span></Button>\n        <Button size=\"small\" @click='croppa.flipY()' type=\"text\"><span class=\"iconfont icon-chuizhifanzhuan\"></span></Button>\n        <Button size=\"small\" @click='croppa.flipX()' type=\"text\"><span class=\"iconfont icon-shuipingjuzhongduiqi\"></span></Button>\n      </div>\n      <p class=\"tip\">提示：请选择一张个人正面照片作为头像，让其他成员更容易认识你。</p>\n      <p class=\"tip\">注意：请选择一张清晰的图片作为头像，大小不能超过2M，并且您可以通过拖拽图片到上面的框框中进行头像上传！</p>\n      <div class=\"btn-area\">\n        <Button @click=\"crop\" type=\"primary\" v-if=\"!laststep\" size=\"large\">裁剪</Button>\n        <Button @click=\"submit\" type=\"primary\" v-if=\"laststep\" size=\"large\">确认修改</Button>\n        <Button @click=\"back\" type=\"error\" v-if=\"laststep\" size=\"large\">重新选择</Button>\n      </div>\n    </div>\n  </div>\n</template>\n<script>\nimport {face} from '@/config'\nimport axios from 'axios'\nexport default {\n  name: 'face',\n  head: {\n    title () {\n      return {\n        inner: this.title\n      }\n    }\n  },\n  data () {\n    return {\n      title: '修改头像',\n      croppa: null,\n      dataUrl: {},\n      laststep: false\n    }\n  },\n  created () {\n  },\n  methods: {\n    back () {\n      this.laststep = !this.laststep\n      this.croppa.refresh()\n    },\n    crop () {\n      this.dataUrl = this.croppa.generateDataUrl('image/jpeg', 0.8)\n      if (!this.dataUrl) {\n        this.$Message.error('您尚未选择任何图片，请选择后再裁剪！')\n      } else {\n        this.laststep = !this.laststep\n      }\n    },\n    submit () {\n      axios({\n        method: 'post',\n        url: face,\n        data: {\n          uId: JSON.parse(this.$localStorage.get('userInfo')).uId,\n          data: this.dataUrl\n        }\n      }).then(res => {\n        console.log(res)\n        if (res.data.status) {\n          // 头像修改成功同时改变页面中的头像和localstorage中的用户信息\n          var userInfo = JSON.parse(this.$localStorage.get('userInfo'))\n          this.$parent.userInfo.cover = res.data.data.file\n          this.$parent.$parent.$refs.header.userInfo.cover = res.data.data.file\n          userInfo.cover = res.data.data.file\n          this.$localStorage.set('userInfo', JSON.stringify(userInfo))\n          this.$Message.success(res.data.msg)\n        } else {\n          this.$Message.error(res.data.msg)\n        }\n      })\n    }\n  }\n}\n</script>\n<style lang=\"scss\" scoped type=\"text/css\">\n.crop{\n  .ivu-btn{\n    span{\n      margin:0;\n      .ifoncont{\n        margin:0;font-size:18px;\n      }\n    }\n  }\n}\n.tip{\n  font-size:14px;\n  color:#666;\n  margin-top:10px;\n}\n.btn-area{\n  padding:20px 0;\n  margin-top:20px;\n}\n.sub-title{\n  font-size:16px;\n  padding:10px 0;\n  margin-bottom:30px;\n}\n.face{\n  display:block;\n  border-radius:50%;\n  overflow:hidden;\n  border:1px solid #E6E6E6;\n  background:#eee;\n  &.normal{\n    width:120px;\n    height:120px;\n  }\n  &.small{\n    width:60px;\n    height:60px;\n  }\n  img{\n    width:100%;\n    height:100%;\n  }\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/views/personer/face.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"face-view\"},[_c('h2',{staticClass:\"page-title\"},[_vm._v(\"修改头像\")]),_vm._v(\" \"),_c('div',{staticClass:\"page-view\"},[_c('ul',{staticClass:\"row w\"},[_c('li',{staticClass:\"col v-t g-12\"},[_c('croppa',{attrs:{\"width\":300,\"height\":300,\"canvas-color\":'default',\"placeholder\":'选择一张图片',\"placeholder-font-size\":16,\"placeholder-color\":'#999',\"accept\":'image/*',\"quality\":2,\"zoom-speed\":3,\"show-remove-button\":true,\"remove-button-color\":'red',\"remove-button-size\":18},model:{value:(_vm.croppa),callback:function ($$v) {_vm.croppa=$$v},expression:\"croppa\"}})],1),_vm._v(\" \"),(_vm.laststep)?_c('li',{staticClass:\"col v-t g-6\"},[_c('h3',{staticClass:\"sub-title\"},[_vm._v(\"大头像\")]),_vm._v(\" \"),_c('div',{staticClass:\"face normal\"},[_c('img',{attrs:{\"src\":_vm.dataUrl,\"alt\":\"\"}})])]):_vm._e(),_vm._v(\" \"),(_vm.laststep)?_c('li',{staticClass:\"col v-t g-6\"},[_c('h3',{staticClass:\"sub-title\"},[_vm._v(\"小头像\")]),_vm._v(\" \"),_c('div',{staticClass:\"face small\"},[_c('img',{attrs:{\"src\":_vm.dataUrl,\"alt\":\"\"}})])]):_vm._e()]),_vm._v(\" \"),_c('div',{staticClass:\"crop\"},[_c('Button',{attrs:{\"size\":\"small\",\"type\":\"text\"},on:{\"click\":function($event){_vm.croppa.zoomIn()}}},[_c('span',{staticClass:\"iconfont icon-fangda\"})]),_vm._v(\" \"),_c('Button',{attrs:{\"size\":\"small\",\"type\":\"text\"},on:{\"click\":function($event){_vm.croppa.zoomOut()}}},[_c('span',{staticClass:\"iconfont icon-suoxiao\"})]),_vm._v(\" \"),_c('Button',{attrs:{\"size\":\"small\",\"type\":\"text\"},on:{\"click\":function($event){_vm.croppa.moveUpwards(10)}}},[_c('span',{staticClass:\"iconfont icon-xiangshang\"})]),_vm._v(\" \"),_c('Button',{attrs:{\"size\":\"small\",\"type\":\"text\"},on:{\"click\":function($event){_vm.croppa.moveDownwards(10)}}},[_c('span',{staticClass:\"iconfont icon-xiangxia\"})]),_vm._v(\" \"),_c('Button',{attrs:{\"size\":\"small\",\"type\":\"text\"},on:{\"click\":function($event){_vm.croppa.moveLeftwards(10)}}},[_c('span',{staticClass:\"iconfont icon-zhixiangzuo\"})]),_vm._v(\" \"),_c('Button',{attrs:{\"size\":\"small\",\"type\":\"text\"},on:{\"click\":function($event){_vm.croppa.moveRightwards(10)}}},[_c('span',{staticClass:\"iconfont icon-xiangyou\"})]),_vm._v(\" \"),_c('Button',{attrs:{\"size\":\"small\",\"type\":\"text\"},on:{\"click\":function($event){_vm.croppa.rotate(2)}}},[_c('span',{staticClass:\"iconfont icon-xuanzhuan1\"})]),_vm._v(\" \"),_c('Button',{attrs:{\"size\":\"small\",\"type\":\"text\"},on:{\"click\":function($event){_vm.croppa.rotate()}}},[_c('span',{staticClass:\"iconfont icon-xuanzhuan\"})]),_vm._v(\" \"),_c('Button',{attrs:{\"size\":\"small\",\"type\":\"text\"},on:{\"click\":function($event){_vm.croppa.flipY()}}},[_c('span',{staticClass:\"iconfont icon-chuizhifanzhuan\"})]),_vm._v(\" \"),_c('Button',{attrs:{\"size\":\"small\",\"type\":\"text\"},on:{\"click\":function($event){_vm.croppa.flipX()}}},[_c('span',{staticClass:\"iconfont icon-shuipingjuzhongduiqi\"})])],1),_vm._v(\" \"),_c('p',{staticClass:\"tip\"},[_vm._v(\"提示：请选择一张个人正面照片作为头像，让其他成员更容易认识你。\")]),_vm._v(\" \"),_c('p',{staticClass:\"tip\"},[_vm._v(\"注意：请选择一张清晰的图片作为头像，大小不能超过2M，并且您可以通过拖拽图片到上面的框框中进行头像上传！\")]),_vm._v(\" \"),_c('div',{staticClass:\"btn-area\"},[(!_vm.laststep)?_c('Button',{attrs:{\"type\":\"primary\",\"size\":\"large\"},on:{\"click\":_vm.crop}},[_vm._v(\"裁剪\")]):_vm._e(),_vm._v(\" \"),(_vm.laststep)?_c('Button',{attrs:{\"type\":\"primary\",\"size\":\"large\"},on:{\"click\":_vm.submit}},[_vm._v(\"确认修改\")]):_vm._e(),_vm._v(\" \"),(_vm.laststep)?_c('Button',{attrs:{\"type\":\"error\",\"size\":\"large\"},on:{\"click\":_vm.back}},[_vm._v(\"重新选择\")]):_vm._e()],1)])])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-042f1a3c\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/personer/face.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-042f1a3c\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./face.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./face.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./face.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-042f1a3c\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./face.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-042f1a3c\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/personer/face.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}