webpackJsonp([22],{uBlC:function(t,s,a){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var e=a("mvHQ"),l=a.n(e),i=a("2uFj"),c=a("mtWM"),n=a.n(c),o=a("162o"),r={name:"email",head:{title:function(){return{inner:this.title}}},data:function(){return{title:"更换邮箱",captcha:i.k,sending:!1,send:!1,time:30,userInfo:JSON.parse(this.$localStorage.get("userInfo")),bingding:JSON.parse(this.$localStorage.get("userInfo")).email,form:{uId:JSON.parse(this.$localStorage.get("userInfo")).uId,old:"",new:"",code:"",captcha:""}}},methods:{getcaptcha:function(){this.captcha=this.captcha+"?"+new Date},submit:function(){var t=this;this.bingding?n()({method:"get",url:i.s,params:this.form}).then(function(s){s.data.status?(t.$Message.success(s.data.msg),t.userInfo.email=t.form.new,t.$localStorage.set("userInfo",l()(t.userInfo)),t.$router.replace("/personer")):t.$Message.error(s.data.msg)}):n()({method:"get",url:i.h,params:{uId:this.form.uId,email:this.form.new,code:this.form.code,captcha:this.form.captcha}}).then(function(s){s.data.status?(t.$Message.success(s.data.msg),t.userInfo.email=t.form.new,t.$localStorage.set("userInfo",l()(t.userInfo)),t.$router.replace("/personer")):t.$Message.error(s.data.msg)})},sendMail:function(){var t=this;this.form.new?this.form.captcha?(this.sending=!this.sending,n()({method:"get",url:i.G,params:{uId:this.form.uId,type:1,email:this.form.new,captcha:this.form.captcha}}).then(function(s){console.log(s),s.data.status?(t.$Message.success(s.data.msg),t.send=!t.send,t.sending=!t.sending,t.countdown()):(t.$Message.error(s.data.msg),t.sending=!t.sending)})):this.$Message.warning("请填写验证码！"):this.$Message.warning("请填写接收验证码的邮箱！")},countdown:function(){var t=this;console.log("开始倒计时"),Object(o.setInterval)(function(){0===t.time?(t.send=!t.send,t.time=180):t.time--},1e3)}}},m={render:function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"info"},[a("h2",{staticClass:"page-title"},[t._v("更换邮箱")]),t._v(" "),a("div",{staticClass:"page-view"},[t.bingding?t._e():a("Alert",{attrs:{banner:"",closable:"","show-icon":"",type:"warning"}},[t._v("温馨提示：您尚未绑定邮箱，请绑定邮箱！")]),t._v(" "),t.bingding?a("Alert",{attrs:{banner:"",closable:"","show-icon":"",type:"warning"}},[t._v("温馨提示：以下操作涉及到用户安全性，请谨慎操作！")]):t._e(),t._v(" "),t.bingding?t._e():a("ul",{staticClass:"form",staticStyle:{width:"65%","margin-top":"30px"}},[a("li",{staticClass:"form-item",staticStyle:{padding:"5px 0"}},[a("ul",{staticClass:"row w"},[t._m(0),t._v(" "),a("li",{staticClass:"col v-m"},[a("Input",{attrs:{size:"large",placeholder:"请填写新邮箱"},model:{value:t.form.new,callback:function(s){t.$set(t.form,"new",s)},expression:"form.new"}})],1)])]),t._v(" "),a("li",{staticClass:"form-item",staticStyle:{padding:"5px 0"}},[a("ul",{staticClass:"row w"},[t._m(1),t._v(" "),a("li",{staticClass:"col v-m"},[a("Input",{attrs:{size:"large",placeholder:"填写右侧验证码！"},model:{value:t.form.captcha,callback:function(s){t.$set(t.form,"captcha",s)},expression:"form.captcha"}})],1),t._v(" "),a("li",{staticClass:"col v-m g-6",staticStyle:{"padding-left":"10px"}},[a("img",{staticClass:"v-m captcha",attrs:{src:t.captcha,alt:""},on:{click:t.getcaptcha}})]),t._v(" "),a("li",{staticClass:"col v-m"},[t.send?t._e():a("Button",{attrs:{loading:t.sending,type:"success",disabled:t.form.captcha.length<5,size:"large"},on:{click:t.sendMail}},[t._v("发送邮件")]),t._v(" "),t.send?a("Button",{attrs:{type:"ghost",disabled:"",size:"large"}},[t._v(t._s(t.time)+"s重新获取")]):t._e()],1)])]),t._v(" "),a("li",{staticClass:"form-item",staticStyle:{padding:"5px 0"}},[a("ul",{staticClass:"row w"},[t._m(2),t._v(" "),a("li",{staticClass:"col v-m g-12"},[a("Input",{attrs:{size:"large",placeholder:"请填写邮箱收到的数字验证码！"},model:{value:t.form.code,callback:function(s){t.$set(t.form,"code",s)},expression:"form.code"}})],1),t._v(" "),a("li",{staticClass:"col g-9"})])]),t._v(" "),a("li",{staticClass:"form-item",staticStyle:{"padding-top":"20px"}},[a("ul",{staticClass:"row w"},[a("li",{staticClass:"col v-m g-3"}),t._v(" "),a("li",{staticClass:"col v-m"},[a("Button",{staticStyle:{width:"150px"},attrs:{type:"primary",size:"large"},on:{click:t.submit}},[t._v("确认更换")])],1)])])]),t._v(" "),t.bingding?a("ul",{staticClass:"form",staticStyle:{width:"65%","margin-top":"30px"}},[a("li",{staticClass:"form-item",staticStyle:{padding:"5px 0"}},[a("ul",{staticClass:"row w"},[t._m(3),t._v(" "),a("li",{staticClass:"col v-m"},[a("Input",{attrs:{size:"large",placeholder:"请填写旧邮箱！"},model:{value:t.form.old,callback:function(s){t.$set(t.form,"old",s)},expression:"form.old"}})],1)])]),t._v(" "),a("li",{staticClass:"form-item",staticStyle:{padding:"5px 0"}},[a("ul",{staticClass:"row w"},[t._m(4),t._v(" "),a("li",{staticClass:"col v-m"},[a("Input",{attrs:{size:"large",placeholder:"请填写新邮箱"},model:{value:t.form.new,callback:function(s){t.$set(t.form,"new",s)},expression:"form.new"}})],1)])]),t._v(" "),a("li",{staticClass:"form-item",staticStyle:{padding:"5px 0"}},[a("ul",{staticClass:"row w"},[t._m(5),t._v(" "),a("li",{staticClass:"col v-m"},[a("Input",{attrs:{size:"large",placeholder:"填写右侧验证码！"},model:{value:t.form.captcha,callback:function(s){t.$set(t.form,"captcha",s)},expression:"form.captcha"}})],1),t._v(" "),a("li",{staticClass:"col v-m g-6",staticStyle:{"padding-left":"10px"}},[a("img",{staticClass:"v-m captcha",attrs:{src:t.captcha,alt:""},on:{click:t.getcaptcha}})]),t._v(" "),a("li",{staticClass:"col v-m"},[t.send?t._e():a("Button",{attrs:{loading:t.sending,type:"success",disabled:t.form.captcha.length<5,size:"large"},on:{click:t.sendMail}},[t._v("发送邮件")]),t._v(" "),t.send?a("Button",{attrs:{type:"ghost",disabled:"",size:"large"}},[t._v(t._s(t.time)+"s重新获取")]):t._e()],1)])]),t._v(" "),a("li",{staticClass:"form-item",staticStyle:{padding:"5px 0"}},[a("ul",{staticClass:"row w"},[t._m(6),t._v(" "),a("li",{staticClass:"col v-m g-12"},[a("Input",{attrs:{size:"large",placeholder:"请填写邮箱收到的数字验证码！"},model:{value:t.form.code,callback:function(s){t.$set(t.form,"code",s)},expression:"form.code"}})],1),t._v(" "),a("li",{staticClass:"col g-9"})])]),t._v(" "),a("li",{staticClass:"form-item",staticStyle:{"padding-top":"20px"}},[a("ul",{staticClass:"row w"},[a("li",{staticClass:"col v-m g-3"}),t._v(" "),a("li",{staticClass:"col v-m"},[a("Button",{staticStyle:{width:"150px"},attrs:{type:"primary",size:"large"},on:{click:t.submit}},[t._v("确认更换")])],1)])])]):t._e()],1)])},staticRenderFns:[function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("li",{staticClass:"col v-m g-3"},[a("div",{staticClass:"label"},[t._v("新邮箱：")])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("li",{staticClass:"col v-m g-3"},[a("div",{staticClass:"label"},[t._v("验证码：")])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("li",{staticClass:"col v-m g-3"},[a("div",{staticClass:"label"},[t._v("验证码：")])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("li",{staticClass:"col v-m g-3"},[a("div",{staticClass:"label"},[t._v("旧邮箱：")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("li",{staticClass:"col v-m g-3"},[s("div",{staticClass:"label"},[this._v("新邮箱：")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("li",{staticClass:"col v-m g-3"},[s("div",{staticClass:"label"},[this._v("验证码：")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("li",{staticClass:"col v-m g-3"},[s("div",{staticClass:"label"},[this._v("验证码：")])])}]},d=a("VU/8")(r,m,!1,null,null,null);s.default=d.exports}});
//# sourceMappingURL=22.0a42e51a63ad8602499b.js.map