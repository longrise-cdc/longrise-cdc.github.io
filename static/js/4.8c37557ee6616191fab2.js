webpackJsonp([4],{"162o":function(t,e,s){var a=Function.prototype.apply;function i(t,e){this._id=t,this._clearFn=e}e.setTimeout=function(){return new i(a.call(setTimeout,window,arguments),clearTimeout)},e.setInterval=function(){return new i(a.call(setInterval,window,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t&&t.close()},i.prototype.unref=i.prototype.ref=function(){},i.prototype.close=function(){this._clearFn.call(window,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout(function(){t._onTimeout&&t._onTimeout()},e))},s("mypn"),e.setImmediate=setImmediate,e.clearImmediate=clearImmediate},mypn:function(t,e,s){(function(t,e){!function(t,s){"use strict";if(!t.setImmediate){var a,i,l,n,c,o=1,r={},m=!1,u=t.document,d=Object.getPrototypeOf&&Object.getPrototypeOf(t);d=d&&d.setTimeout?d:t,"[object process]"==={}.toString.call(t.process)?a=function(t){e.nextTick(function(){p(t)})}:!function(){if(t.postMessage&&!t.importScripts){var e=!0,s=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=s,e}}()?t.MessageChannel?((l=new MessageChannel).port1.onmessage=function(t){p(t.data)},a=function(t){l.port2.postMessage(t)}):u&&"onreadystatechange"in u.createElement("script")?(i=u.documentElement,a=function(t){var e=u.createElement("script");e.onreadystatechange=function(){p(t),e.onreadystatechange=null,i.removeChild(e),e=null},i.appendChild(e)}):a=function(t){setTimeout(p,0,t)}:(n="setImmediate$"+Math.random()+"$",c=function(e){e.source===t&&"string"==typeof e.data&&0===e.data.indexOf(n)&&p(+e.data.slice(n.length))},t.addEventListener?t.addEventListener("message",c,!1):t.attachEvent("onmessage",c),a=function(e){t.postMessage(n+e,"*")}),d.setImmediate=function(t){"function"!=typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),s=0;s<e.length;s++)e[s]=arguments[s+1];var i={callback:t,args:e};return r[o]=i,a(o),o++},d.clearImmediate=f}function f(t){delete r[t]}function p(t){if(m)setTimeout(p,0,t);else{var e=r[t];if(e){m=!0;try{!function(t){var e=t.callback,a=t.args;switch(a.length){case 0:e();break;case 1:e(a[0]);break;case 2:e(a[0],a[1]);break;case 3:e(a[0],a[1],a[2]);break;default:e.apply(s,a)}}(e)}finally{f(t),m=!1}}}}}("undefined"==typeof self?void 0===t?this:t:self)}).call(e,s("DuR2"),s("W2nU"))},uBlC:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s("mvHQ"),i=s.n(a),l=s("2uFj"),n=s("mtWM"),c=s.n(n),o=s("162o"),r={name:"email",head:{title:function(){return{inner:this.title}}},data:function(){return{title:"更换邮箱",captcha:l.k,sending:!1,send:!1,time:30,userInfo:JSON.parse(this.$localStorage.get("userInfo")),bingding:JSON.parse(this.$localStorage.get("userInfo")).email,form:{uId:JSON.parse(this.$localStorage.get("userInfo")).uId,old:"",new:"",code:"",captcha:""}}},methods:{getcaptcha:function(){this.captcha=this.captcha+"?"+new Date},submit:function(){var t=this;this.bingding?c()({method:"get",url:l.s,params:this.form}).then(function(e){e.data.status?(t.$Message.success(e.data.msg),t.userInfo.email=t.form.new,t.$localStorage.set("userInfo",i()(t.userInfo)),t.$router.replace("/personer")):t.$Message.error(e.data.msg)}):c()({method:"get",url:l.h,params:{uId:this.form.uId,email:this.form.new,code:this.form.code,captcha:this.form.captcha}}).then(function(e){e.data.status?(t.$Message.success(e.data.msg),t.userInfo.email=t.form.new,t.$localStorage.set("userInfo",i()(t.userInfo)),t.$router.replace("/personer")):t.$Message.error(e.data.msg)})},sendMail:function(){var t=this;this.form.new?this.form.captcha?(this.sending=!this.sending,c()({method:"get",url:l.G,params:{uId:this.form.uId,type:1,email:this.form.new,captcha:this.form.captcha}}).then(function(e){console.log(e),e.data.status?(t.$Message.success(e.data.msg),t.send=!t.send,t.sending=!t.sending,t.countdown()):(t.$Message.error(e.data.msg),t.sending=!t.sending)})):this.$Message.warning("请填写验证码！"):this.$Message.warning("请填写接收验证码的邮箱！")},countdown:function(){var t=this;console.log("开始倒计时"),Object(o.setInterval)(function(){0===t.time?(t.send=!t.send,t.time=180):t.time--},1e3)}}},m={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"info"},[s("h2",{staticClass:"page-title"},[t._v("更换邮箱")]),t._v(" "),s("div",{staticClass:"page-view"},[t.bingding?t._e():s("Alert",{attrs:{banner:"",closable:"","show-icon":"",type:"warning"}},[t._v("温馨提示：您尚未绑定邮箱，请绑定邮箱！")]),t._v(" "),t.bingding?s("Alert",{attrs:{banner:"",closable:"","show-icon":"",type:"warning"}},[t._v("温馨提示：以下操作涉及到用户安全性，请谨慎操作！")]):t._e(),t._v(" "),t.bingding?t._e():s("ul",{staticClass:"form",staticStyle:{width:"65%","margin-top":"30px"}},[s("li",{staticClass:"form-item",staticStyle:{padding:"5px 0"}},[s("ul",{staticClass:"row w"},[t._m(0),t._v(" "),s("li",{staticClass:"col v-m"},[s("Input",{attrs:{size:"large",placeholder:"请填写新邮箱"},model:{value:t.form.new,callback:function(e){t.$set(t.form,"new",e)},expression:"form.new"}})],1)])]),t._v(" "),s("li",{staticClass:"form-item",staticStyle:{padding:"5px 0"}},[s("ul",{staticClass:"row w"},[t._m(1),t._v(" "),s("li",{staticClass:"col v-m"},[s("Input",{attrs:{size:"large",placeholder:"填写右侧验证码！"},model:{value:t.form.captcha,callback:function(e){t.$set(t.form,"captcha",e)},expression:"form.captcha"}})],1),t._v(" "),s("li",{staticClass:"col v-m g-6",staticStyle:{"padding-left":"10px"}},[s("img",{staticClass:"v-m captcha",attrs:{src:t.captcha,alt:""},on:{click:t.getcaptcha}})]),t._v(" "),s("li",{staticClass:"col v-m"},[t.send?t._e():s("Button",{attrs:{loading:t.sending,type:"success",disabled:t.form.captcha.length<5,size:"large"},on:{click:t.sendMail}},[t._v("发送邮件")]),t._v(" "),t.send?s("Button",{attrs:{type:"ghost",disabled:"",size:"large"}},[t._v(t._s(t.time)+"s重新获取")]):t._e()],1)])]),t._v(" "),s("li",{staticClass:"form-item",staticStyle:{padding:"5px 0"}},[s("ul",{staticClass:"row w"},[t._m(2),t._v(" "),s("li",{staticClass:"col v-m g-12"},[s("Input",{attrs:{size:"large",placeholder:"请填写邮箱收到的数字验证码！"},model:{value:t.form.code,callback:function(e){t.$set(t.form,"code",e)},expression:"form.code"}})],1),t._v(" "),s("li",{staticClass:"col g-9"})])]),t._v(" "),s("li",{staticClass:"form-item",staticStyle:{"padding-top":"20px"}},[s("ul",{staticClass:"row w"},[s("li",{staticClass:"col v-m g-3"}),t._v(" "),s("li",{staticClass:"col v-m"},[s("Button",{staticStyle:{width:"150px"},attrs:{type:"primary",size:"large"},on:{click:t.submit}},[t._v("确认更换")])],1)])])]),t._v(" "),t.bingding?s("ul",{staticClass:"form",staticStyle:{width:"65%","margin-top":"30px"}},[s("li",{staticClass:"form-item",staticStyle:{padding:"5px 0"}},[s("ul",{staticClass:"row w"},[t._m(3),t._v(" "),s("li",{staticClass:"col v-m"},[s("Input",{attrs:{size:"large",placeholder:"请填写旧邮箱！"},model:{value:t.form.old,callback:function(e){t.$set(t.form,"old",e)},expression:"form.old"}})],1)])]),t._v(" "),s("li",{staticClass:"form-item",staticStyle:{padding:"5px 0"}},[s("ul",{staticClass:"row w"},[t._m(4),t._v(" "),s("li",{staticClass:"col v-m"},[s("Input",{attrs:{size:"large",placeholder:"请填写新邮箱"},model:{value:t.form.new,callback:function(e){t.$set(t.form,"new",e)},expression:"form.new"}})],1)])]),t._v(" "),s("li",{staticClass:"form-item",staticStyle:{padding:"5px 0"}},[s("ul",{staticClass:"row w"},[t._m(5),t._v(" "),s("li",{staticClass:"col v-m"},[s("Input",{attrs:{size:"large",placeholder:"填写右侧验证码！"},model:{value:t.form.captcha,callback:function(e){t.$set(t.form,"captcha",e)},expression:"form.captcha"}})],1),t._v(" "),s("li",{staticClass:"col v-m g-6",staticStyle:{"padding-left":"10px"}},[s("img",{staticClass:"v-m captcha",attrs:{src:t.captcha,alt:""},on:{click:t.getcaptcha}})]),t._v(" "),s("li",{staticClass:"col v-m"},[t.send?t._e():s("Button",{attrs:{loading:t.sending,type:"success",disabled:t.form.captcha.length<5,size:"large"},on:{click:t.sendMail}},[t._v("发送邮件")]),t._v(" "),t.send?s("Button",{attrs:{type:"ghost",disabled:"",size:"large"}},[t._v(t._s(t.time)+"s重新获取")]):t._e()],1)])]),t._v(" "),s("li",{staticClass:"form-item",staticStyle:{padding:"5px 0"}},[s("ul",{staticClass:"row w"},[t._m(6),t._v(" "),s("li",{staticClass:"col v-m g-12"},[s("Input",{attrs:{size:"large",placeholder:"请填写邮箱收到的数字验证码！"},model:{value:t.form.code,callback:function(e){t.$set(t.form,"code",e)},expression:"form.code"}})],1),t._v(" "),s("li",{staticClass:"col g-9"})])]),t._v(" "),s("li",{staticClass:"form-item",staticStyle:{"padding-top":"20px"}},[s("ul",{staticClass:"row w"},[s("li",{staticClass:"col v-m g-3"}),t._v(" "),s("li",{staticClass:"col v-m"},[s("Button",{staticStyle:{width:"150px"},attrs:{type:"primary",size:"large"},on:{click:t.submit}},[t._v("确认更换")])],1)])])]):t._e()],1)])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("li",{staticClass:"col v-m g-3"},[e("div",{staticClass:"label"},[this._v("新邮箱：")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("li",{staticClass:"col v-m g-3"},[e("div",{staticClass:"label"},[this._v("验证码：")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("li",{staticClass:"col v-m g-3"},[e("div",{staticClass:"label"},[this._v("验证码：")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("li",{staticClass:"col v-m g-3"},[e("div",{staticClass:"label"},[this._v("旧邮箱：")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("li",{staticClass:"col v-m g-3"},[e("div",{staticClass:"label"},[this._v("新邮箱：")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("li",{staticClass:"col v-m g-3"},[e("div",{staticClass:"label"},[this._v("验证码：")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("li",{staticClass:"col v-m g-3"},[e("div",{staticClass:"label"},[this._v("验证码：")])])}]},u=s("VU/8")(r,m,!1,null,null,null);e.default=u.exports}});
//# sourceMappingURL=4.8c37557ee6616191fab2.js.map